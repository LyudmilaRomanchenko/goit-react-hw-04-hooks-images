(this["webpackJsonpgoit-react-hw-02-phonebook"]=this["webpackJsonpgoit-react-hw-02-phonebook"]||[]).push([[0],{10:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__1IXvP",ImageGalleryItem:"ImageGallery_ImageGalleryItem__2y_xz"}},11:function(e,t,a){e.exports={Overlay:"Modal_Overlay__jYoJD",Modal:"Modal_Modal__cgVvB"}},14:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2X3co",ImageGalleryItemImage:"ImageGalleryItem_ImageGalleryItemImage__1JNX8"}},16:function(e,t,a){e.exports={Button:"Button_Button__2VZWC"}},17:function(e,t,a){e.exports={Loader:"Spinner_Loader__BHFoR"}},23:function(e,t,a){},24:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a.n(r),o=a(8),c=a.n(o),l=(a(23),a(13)),s=a(3),i=a(4),u=a(6),h=a(5),d=(a(24),a(0)),m=a.n(d),g=a(7),p=a.n(g),b=a(1),f=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={search:""},e.handleChange=function(t){e.setState({search:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault();var a=e.state.search;console.log(a),""!==a.trim()?e.props.onSubmit(a):console.log("\u041f\u0443\u0441\u0442\u0430\u044f \u0441\u0442\u0440\u043e\u043a\u0430")},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(b.jsx)("header",{className:p.a.Searchbar,children:Object(b.jsxs)("form",{className:p.a.SearchForm,onSubmit:this.handleSubmit,children:[Object(b.jsx)("button",{type:"submit",className:p.a.SearchFormButton,children:Object(b.jsx)("span",{className:p.a.SearchFormButtonLabel,children:"Search"})}),Object(b.jsx)("input",{className:p.a.SearchFormInput,type:"text",name:"search",value:this.state.search,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleChange})]})})}}]),a}(r.Component);f.defaultProps={onSubmit:m.a.func.isRequired};var j=f,y=a(10),v=a.n(y),I=a(14),S=a.n(I);function O(e){var t=e.webformatURL,a=e.largeImageURL,r=e.onClick;return Object(b.jsx)("img",{src:t,alt:a,className:S.a.ImageGalleryItemImage,onClick:r})}O.prototype={webformatURL:m.a.string.isRequired,largeImageURL:m.a.string.isRequired,onClick:m.a.func.isRequired};var _=O;function w(e){var t=e.data,a=e.handleClickImg;return console.log(t),Object(b.jsx)("div",{children:Object(b.jsx)("ul",{className:v.a.ImageGallery,children:t.map((function(e){var t=e.id,r=e.webformatURL,n=e.largeImageURL;return Object(b.jsx)("li",{className:v.a.ImageGalleryItem,children:Object(b.jsx)(_,{webformatURL:r,largeImageURL:n,onClick:a})},t)}))})})}w.prototype={data:m.a.arrayOf(m.a.shape({id:m.a.number.isRequired,webformatURL:m.a.string.isRequired,largeImageURL:m.a.string.isRequired}).isRequired),handleClickImg:m.a.func.isRequired};var x=w,k=a(11),L=a.n(k),R=document.querySelector("#modal-root"),C=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleKeyDown=function(t){"Escape"===t.code&&(console.log("\u041d\u0430\u0436\u0430\u043b\u0438 Escape"),e.props.onClick())},e.handleBackdrop=function(t){t.currentTarget===t.target&&(console.log("\u041d\u0430\u0436\u0430\u043b\u0438 Backdrop"),e.props.onClick())},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(o.createPortal)(Object(b.jsx)("div",{className:L.a.Overlay,onClick:this.handleBackdrop,children:Object(b.jsx)("div",{className:L.a.Modal,children:Object(b.jsx)("img",{src:this.props.largeImg,alt:""})})}),R)}}]),a}(r.Component);C.defaultProps={largeImg:m.a.string.isRequired,onClick:m.a.func.isRequired};var B=C,M=a(12),F=a.n(M),q=a(15),G="23052937-32fb9bd6f4b84b12682be3748",U="https://pixabay.com/api";function N(){return(N=Object(q.a)(F.a.mark((function e(t,a){var r,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(U,"/?q=").concat(t,"&page=").concat(a,"&key=").concat(G,"&image_type=photo&orientation=horizontal&per_page=12"),e.next=3,fetch(r);case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E={fetchApi:function(e,t){return N.apply(this,arguments)}},A=E,D=a(16),P=a.n(D);function H(e){var t=e.handleButtonLoadMore;return Object(b.jsx)("button",{type:"button",className:P.a.Button,onClick:t,children:"Load more"})}H.prototype={handleButtonLoadMore:m.a.func.isRequired};var T=H,J=a(17),X=a.n(J),z=(a(29),a(18)),K=a.n(z);var V=function(){return Object(b.jsx)(K.a,{className:X.a.Loader,type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})},W=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={page:1,query:null,data:[],showModal:!1,largeImg:"",status:"idle",error:null},e.resetPage=function(){e.setState({page:1,data:[],showModal:!1,status:"idle"})},e.handleFormSubmit=function(t){e.resetPage(),e.setState({query:t})},e.handleButtonLoadMore=function(){console.log("\u041a\u043d\u043e\u043f\u043a\u0430 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0431\u043e\u043b\u0448\u0435"),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),e.setState((function(e){return{page:e.page+1}}))},e.handleClickImg=function(t){var a=t.currentTarget.alt;console.log(a),e.setState({showModal:!0,largeImg:a}),console.log(e.state.largeImg),console.log("Modal")},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"});var r=t.query,n=this.state.query,o=t.page,c=this.state.page;o===c&&r===n||(this.setState({status:"pending"}),A.fetchApi(n,c).then((function(e){var t=e.hits;a.setState((function(e){return{data:[].concat(Object(l.a)(e.data),Object(l.a)(t.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL}}))))}}))})).catch((function(e){return a.setState({error:e})})).finally((function(){return a.setState({status:"resolved"})})))}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.status,r=e.showModal;return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(j,{onSubmit:this.handleFormSubmit}),"idle"===a&&Object(b.jsx)("h2",{children:"Enter your request."}),t.length>0&&Object(b.jsx)(x,{data:t,handleClickImg:this.handleClickImg}),t.length>=12&&"resolved"===a&&Object(b.jsx)(T,{handleButtonLoadMore:this.handleButtonLoadMore}),r&&Object(b.jsx)(B,{largeImg:this.state.largeImg,onClick:this.toggleModal}),"pending"===a&&Object(b.jsx)(V,{})]})}}]),a}(r.Component),Q=W;c.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(Q,{})}),document.getElementById("root"))},7:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__1OML6",SearchForm:"Searchbar_SearchForm__3zqXk",SearchFormButton:"Searchbar_SearchFormButton__33tHH",SearchFormButtonLabel:"Searchbar_SearchFormButtonLabel__1A0H8",SearchFormInput:"Searchbar_SearchFormInput__1pdGi",SearchFormIput:"Searchbar_SearchFormIput__1QSbc"}}},[[48,1,2]]]);
//# sourceMappingURL=main.6a088313.chunk.js.map